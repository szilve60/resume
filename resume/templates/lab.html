{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="lab-page">
<div class="ladder-demo" aria-label="PLC Ladder Demo">
  <div class="ladder-title">PLC Ladder Demo</div>
  <div class="ladder-rung puzzle">
    <div class="rail"></div>
    <div class="branch">
      <div class="path top">
        <div class="contact" data-contact="s1" title="S1"><span class="label">S1</span></div>
        <div class="contact" data-contact="s2" title="S2"><span class="label">S2</span></div>
        <div class="contact" data-contact="s3" title="S3"><span class="label">S3</span></div>
      </div>
      <div class="path mid">
        <div class="contact" data-contact="s4" title="S4"><span class="label">S4</span></div>
        <div class="contact" data-contact="s5" title="S5"><span class="label">S5</span></div>
      </div>
      <div class="path bottom">
        <div class="contact" data-contact="s6" title="S6"><span class="label">S6</span></div>
      </div>
    </div>
    <div class="coil" title="LAMP">
      <span class="label">LAMP</span>
      <span class="lamp"></span>
    </div>
    <div class="rail"></div>
  </div>
  <div class="ladder-hint">Puzzle: (S1 AND S2 AND S3) OR (S4 AND S5) OR S6</div>
</div>

<div class="scope-demo locked" aria-label="Oscilloscope Demo">
  <div class="scope-title">Oscilloscope</div>
  <div class="scope-lock">Solve the ladder to unlock</div>
  <canvas id="scope-canvas" width="420" height="140"></canvas>
  <div class="scope-controls">
    <label for="waveform">Wave</label>
    <select id="waveform">
      <option value="pwm">PWM</option>
      <option value="sine">Sine</option>
      <option value="triangle">Triangle</option>
    </select>
    <label for="duty">Duty</label>
    <input id="duty" type="range" min="5" max="95" value="45" />
    <span id="duty-value">45%</span>
  </div>
</div>

<div class="state-demo" aria-label="PLC State Machine">
  <div class="state-title">State Machine</div>
  <div class="state-status">
    <span class="state-led" data-state="idle"></span>
    <span class="state-led" data-state="running"></span>
    <span class="state-led" data-state="stopped"></span>
    <span class="state-label" id="state-label">IDLE</span>
  </div>
  <div class="state-controls">
    <button type="button" data-action="start">Start</button>
    <button type="button" data-action="stop">Stop</button>
    <button type="button" data-action="reset">Reset</button>
  </div>
</div>
</section>

<script src="{% static 'js/ladder-demo.js' %}"></script>
<script src="{% static 'js/oscilloscope.js' %}"></script>
<script src="{% static 'js/state-machine.js' %}"></script>
{% endblock %}
